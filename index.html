<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>随心期待</title>
    <meta name="keywords" content="随心Blog,随心网络,传说网络,传说导航,传说代挂网,CSWL">
    <meta name="description" content="网站维护中">
    <meta name="robots" content="noindex, nofollow">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        html, body {
            margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden;
            /* 使用系统字体栈，国内访问速度最快 */
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            color: #fefeff;
            background: rgb(8, 5, 16);
            -webkit-font-smoothing: antialiased;
            cursor: none !important; /* 隐藏鼠标 */
            user-select: none; /* 禁止选择 */
        }

        #container {
            position: absolute; z-index: 20; width: 100%; height: 100%;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            text-align: center; 
            pointer-events: none; 
        }

        #container a { 
            pointer-events: auto; 
            color: #fff; 
            text-decoration: none; 
            border-bottom: 1px dotted #666; 
            transition: color 0.3s, border-bottom 0.3s; 
            margin: 5px; 
            display: inline-block;
            cursor: none !important; 
            position: relative;
            z-index: 30; /* 确保链接在最上层 */
        }
        
        #container a:hover { 
            color: #0ff; 
            border-bottom: 1px solid #0ff;
        }

        h1 {
            font-size: clamp(1.8rem, 5vw, 3rem);
            font-weight: 300; letter-spacing: 0.35em;
            text-shadow: 0 0 25px rgba(254, 254, 255, 0.85);
            margin-bottom: 15px;
        }

        h2 {
            font-size: clamp(0.9rem, 3vw, 1.5em);
            font-weight: 300; letter-spacing: 0.5em;
            text-shadow: 0 0 25px rgba(254, 254, 255, 0.85);
            opacity: 0.8;
            margin-bottom: 30px;
        }

        h1, h2 { visibility: hidden; opacity: 0; transition: opacity 2.5s ease; }
        h1.transition-in, h2.transition-in { visibility: visible; opacity: 1; }

        #canvas {
            position: absolute; top: 0; left: 0; z-index: 10; width: 100%; height: 100%; 
            cursor: none !important; 
        }
    </style>
</head>

<body oncontextmenu="return false" ondragstart="return false" onselectstart="return false" oncopy="return false">

    <div id="container">
        <div>
            <h1 id="h1">这便是主页</h1>
            <h2 id="h2">网站目前正在维护！请各位客官稍后</h2>
            
            <div style="font-size: 14px; line-height: 2;">
                <a href="https://qm.qq.com/cgi-bin/qm/qr?k=Q52ocpcmw0zv6DnPGgNYsi6xEwIzQT0A&noverify=0" target="_blank" class="hover-trigger">联系方式</a><br>
                <a href="http://beian.miit.gov.cn/" target="_blank" class="hover-trigger">闽ICP备2022014585号-1</a>
            </div>
        </div>
    </div>

    <canvas id="canvas"></canvas>

    <audio id="bgm" loop>
        <source src="/33.mp3" type="audio/mpeg" />
    </audio>

    <script>
        // --- 1. 安全拦截脚本 ---
        document.onkeydown = function (e) {
            e = e || window.event;
            if (e.keyCode == 123 || (e.ctrlKey && e.shiftKey && (e.keyCode == 73 || e.keyCode == 74)) || (e.ctrlKey && (e.keyCode == 85 || e.keyCode == 83))) {
                return false;
            }
        };

        // --- 2. 音乐控制与页面可见性 API ---
        const audio = document.getElementById('bgm');
        let isUserInteracted = false;

        // 点击页面播放
        document.body.addEventListener('click', function() {
            if(audio.paused) { 
                audio.play(); 
                isUserInteracted = true;
            }
        }, {once:true});

        // 页面不可见时（切换标签）自动暂停
        document.addEventListener('visibilitychange', function() {
            if (document.hidden) {
                if(!audio.paused) audio.pause(); // 切走暂停
            } else {
                if(isUserInteracted) audio.play(); // 切回来如果之前播放过，继续播放
            }
        });

        // --- 3. 粒子特效逻辑 ---
        (function() {
            var ctx, hue, target = {}, tendrils = [], settings = {};
            settings.debug = false;
            settings.friction = 0.5;
            settings.trails = 20;
            settings.size = 50; // 默认大小
            settings.dampening = 0.25;
            settings.tension = 0.98;
            Math.TWO_PI = Math.PI * 2;
            
            // 核心交互：鼠标碰到链接时，特效发生变化
            var hoverTriggers = document.querySelectorAll('.hover-trigger');
            hoverTriggers.forEach(function(link) {
                link.addEventListener('mouseenter', function() {
                    settings.trails = 40; // 增加光束数量
                    settings.size = 70;   // 增加光束长度
                    settings.friction = 0.45; // 减小摩擦，更灵动
                    reset(); // 重置以应用新参数
                });
                link.addEventListener('mouseleave', function() {
                    settings.trails = 20;
                    settings.size = 50;
                    settings.friction = 0.5;
                    reset();
                });
            });

            function Oscillator(options) { this.init(options || {}); }
            Oscillator.prototype = (function() {
                var value = 0;
                return {
                    init: function(options) {
                        this.phase = options.phase || 0;
                        this.offset = options.offset || 0;
                        this.frequency = options.frequency || 0.001;
                        this.amplitude = options.amplitude || 1;
                    },
                    update: function() {
                        this.phase += this.frequency;
                        value = this.offset + Math.sin(this.phase) * this.amplitude;
                        return value;
                    },
                    value: function() { return value; }
                };
            })();

            function Tendril(options) { this.init(options || {}); }
            Tendril.prototype = (function() {
                function Node() { this.x = 0; this.y = 0; this.vy = 0; this.vx = 0; }
                return {
                    init: function(options) {
                        this.spring = options.spring + (Math.random() * 0.1) - 0.05;
                        this.friction = settings.friction + (Math.random() * 0.01) - 0.005;
                        this.nodes = [];
                        for (var i = 0, node; i < settings.size; i++) {
                            node = new Node();
                            node.x = target.x; node.y = target.y;
                            this.nodes.push(node);
                        }
                    },
                    update: function() {
                        var spring = this.spring, node = this.nodes[0];
                        node.vx += (target.x - node.x) * spring;
                        node.vy += (target.y - node.y) * spring;
                        for (var prev, i = 0, n = this.nodes.length; i < n; i++) {
                            node = this.nodes[i];
                            if (i > 0) {
                                prev = this.nodes[i - 1];
                                node.vx += (prev.x - node.x) * spring;
                                node.vy += (prev.y - node.y) * spring;
                                node.vx += prev.vx * settings.dampening;
                                node.vy += prev.vy * settings.dampening;
                            }
                            node.vx *= this.friction; node.vy *= this.friction;
                            node.x += node.vx; node.y += node.vy;
                            spring *= settings.tension;
                        }
                    },
                    draw: function() {
                        var x = this.nodes[0].x, y = this.nodes[0].y, a, b;
                        ctx.beginPath();
                        ctx.moveTo(x, y);
                        for (var i = 1, n = this.nodes.length - 2; i < n; i++) {
                            a = this.nodes[i]; b = this.nodes[i + 1];
                            x = (a.x + b.x) * 0.5; y = (a.y + b.y) * 0.5;
                            ctx.quadraticCurveTo(a.x, a.y, x, y);
                        }
                        a = this.nodes[i]; b = this.nodes[i + 1];
                        ctx.quadraticCurveTo(a.x, a.y, b.x, b.y);
                        ctx.stroke();
                        ctx.closePath();
                    }
                };
            })();

            function init(event) {
                document.removeEventListener('mousemove', init);
                document.removeEventListener('touchstart', init);
                document.addEventListener('mousemove', mousemove);
                document.addEventListener('touchmove', mousemove);
                document.addEventListener('touchstart', touchstart);
                mousemove(event);
                reset();
                loop();
            }

            function reset() {
                tendrils = [];
                for (var i = 0; i < settings.trails; i++) {
                    tendrils.push(new Tendril({ spring: 0.45 + 0.025 * (i / settings.trails) }));
                }
            }

            function loop() {
                // 如果页面不可见，停止渲染以节省资源
                if (document.hidden) {
                    requestAnimFrame(loop);
                    return;
                }

                if (!ctx.running) return;
                ctx.globalCompositeOperation = 'source-over';
                ctx.fillStyle = 'rgba(8,5,16,0.4)';
                ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height);
                ctx.globalCompositeOperation = 'lighter';
                ctx.strokeStyle = 'hsla(' + Math.round(hue.update()) + ',90%,50%,0.25)';
                ctx.lineWidth = 1;
                for (var i = 0, tendril; i < settings.trails; i++) {
                    tendril = tendrils[i]; tendril.update(); tendril.draw();
                }
                ctx.frame++;
                requestAnimFrame(loop);
            }

            function resize() {
                ctx.canvas.width = window.innerWidth;
                ctx.canvas.height = window.innerHeight;
            }

            function start() { if (!ctx.running) { ctx.running = true; loop(); } }
            function stop() { ctx.running = false; }

            function mousemove(event) {
                if (event.touches) {
                    target.x = event.touches[0].pageX; target.y = event.touches[0].pageY;
                } else {
                    target.x = event.clientX; target.y = event.clientY;
                }
            }

            function touchstart(event) {
                if (event.touches.length == 1) {
                    target.x = event.touches[0].pageX; target.y = event.touches[0].pageY;
                }
            }

            window.requestAnimFrame = (function() {
                return window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || function(fn) { window.setTimeout(fn, 1000 / 60) };
            })();

            window.onload = function() {
                ctx = document.getElementById('canvas').getContext('2d');
                ctx.running = true;
                ctx.frame = 1;
                hue = new Oscillator({ phase: Math.random() * Math.TWO_PI, amplitude: 85, frequency: 0.0015, offset: 285 });
                
                setTimeout(function() {
                    document.getElementById('h1').classList.add('transition-in');
                    document.getElementById('h2').classList.add('transition-in');
                }, 500);

                document.addEventListener('mousemove', init);
                document.addEventListener('touchstart', init);
                document.body.addEventListener('orientationchange', resize);
                window.addEventListener('resize', resize);
                window.addEventListener('focus', start);
                window.addEventListener('blur', stop);
                resize();
            };
        })();
    </script>
</body>
</html>